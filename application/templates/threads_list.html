{% extends "layout.html" %}
  
{% block body %}
    
<a href="{{ url_for('thread_openingForm') }}">Aloita uusi keskusteluketju</a>
<br></br>

<table class="table">
  <thead class="thead-dark">
    <th>Aihepiirit: </th>
    <th>
      <input type="submit" value="Suodata"/>
    </th>
  </thead>
  <tbody>
    <tr>
      {% for topic in topics %}
        <td>
          <input type="checkbox" id="{topic}" name="choices" value="{{topic.id}}">
          <label for="{topic}">{{ topic.name }} </label><br>
        </td>
        {% endfor %}
    </tr>
  </tbody>
</table>

<table class="table">
    <thead class="thead-dark">
        <tr>
          <th scope="row">Keskusteluketjut</th>
          <th scope="row">Aloittaja</th>
          <th scope="row">Aihepiirit</th>
          <th scope="row">Aloitettu</th>
          <th scope="row">Viestej√§</th>
        </tr>
      </thead>
    <tbody class="table table-striped">
        {% for thread in threads %}
        <tr>
            <td><a href="{{ url_for('thread_details', thread_id=thread.id) }}">{{ thread.title }}</a></td>
            <td>{{ thread.opener.username }}</td>
            <td>
              {% for topic in thread.topics %}
              {{ topic.name }}, 
              {% endfor %}
            </td>
            <td>{{ thread.time_of_opening.strftime('%d.%m %Y klo %I:%M') }}</td>
            <td>{{ thread.totalNumberOfMessages(thread.id)}}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>


{% endblock %}